# 🎯 管理後台使用說明

## 📱 給客戶使用的管理後台連結

### 本機測試連結（開發環境）
```
http://localhost:3000/admin
```

### 正式環境連結（部署後）
```
https://your-domain.com/admin
```

---

## 🚀 如何啟動管理後台

### 方法 1：使用 npm 啟動（推薦）
```bash
cd C:\Users\ASUS\Desktop\work\cyndisystem
npm start
```

### 方法 2：直接執行
```bash
node src/server.js
```

### 方法 3：使用提供的腳本（Windows）
直接雙擊 `START_SERVER.bat`

---

## 🔐 登入資訊

目前管理後台**沒有密碼保護**，任何人都可以直接訪問。

### 如需要密碼保護，有以下選項：

1. **使用環境變數設定的 Admin API Key**
   - 在 `.env` 檔案中已設定：`ADMIN_API_KEY=cyndi2024admin`
   - 需要在後台加入登入頁面

2. **建議使用 ngrok 或 cloudflare tunnel 加上基本認證**

---

## 📋 管理後台功能清單

### ✅ 已完成功能

#### 1. 儀表板（Dashboard）
- 總訂單數統計
- 待處理訂單數
- 總營收統計
- 客戶總數
- 銷售趨勢圖表
- 最近訂單列表

#### 2. 訂單管理（Orders）
- 訂單列表查詢
- 訂單狀態篩選
- 併單狀態管理
- 訂單詳情查看
- 訂單狀態更新
- 搜尋功能

#### 3. 客戶管理（Customers）
- 客戶列表查詢
- 客戶等級管理
- 客戶詳情查看
- 客戶統計資訊
- 客戶資料編輯
- 訂單歷史查詢

#### 4. 商品管理（Products）
- 商品/變體列表
- 商品搜尋
- 多條件篩選（款式、顏色、尺寸、性別、狀態）
- 商品詳情查看
- 銷售統計
- 商品資料編輯

#### 5. 銷售報表（Reports）
- 時間範圍報表
- 銷售趨勢分析
- 熱銷商品排行
- 客戶分析
- 訂單狀態分析
- 優質客戶排行
- CSV 匯出功能

---

## 🔄 切換資料來源

### 目前使用：Notion
管理後台目前連接到 **Notion 資料庫**

### 切換到 Supabase

1. 修改 `src/routes/admin.js`
2. 將 `notionService` 改為 `supabaseService`
3. 重新啟動伺服器

或使用環境變數控制：
```env
# 在 .env 檔案中新增
DATA_SOURCE=supabase  # 或 notion
```

---

## 📦 管理後台可以做什麼

### 客戶可以自行：

✅ **商品管理**
- 查看所有商品和變體
- 編輯商品資訊（名稱、價格、狀態）
- 查看商品銷售統計
- 搜尋和篩選商品

✅ **訂單管理**
- 查看所有訂單
- 更新訂單狀態
- 篩選待處理訂單
- 查看訂單詳情

✅ **客戶管理**
- 查看客戶列表
- 編輯客戶資料
- 查看客戶消費統計
- 管理客戶等級

✅ **報表查詢**
- 生成銷售報表
- 查看熱銷商品
- 分析客戶行為
- 匯出資料

---

## ⚠️ 目前限制

### 🔴 無法直接 CRUD 的功能：

1. **新增商品**
   - 目前後台只能**編輯**現有商品
   - 新增商品需要透過測試腳本或直接操作 Supabase

2. **刪除資料**
   - 為了安全，後台沒有刪除按鈕
   - 需要時可以透過 Supabase Dashboard 刪除

3. **圖片上傳**
   - 目前只能輸入圖片 URL
   - 需要先上傳圖片到其他地方（如 Imgur、Supabase Storage）

---

## 💡 建議改善

### 如果需要完整的商品 CRUD 功能：

1. **新增「建立商品」按鈕**
   - 在商品管理頁面加入「新增商品」按鈕
   - 彈出表單輸入商品資訊
   - 送到後端 API 建立

2. **圖片上傳功能**
   - 整合 Supabase Storage
   - 或使用第三方圖床 (Cloudinary, Imgur)

3. **批次匯入功能**
   - 允許上傳 CSV/Excel 批次新增商品
   - 更適合大量商品上架

---

## 🌐 如何讓客戶遠端訪問

### 選項 1：使用 ngrok (最簡單)

1. 安裝 ngrok: https://ngrok.com/
2. 執行:
   ```bash
   ngrok http 3000
   ```
3. 會得到一個公開網址，例如: `https://abc123.ngrok.io`
4. 管理後台網址就是: `https://abc123.ngrok.io/admin`
5. 將此網址給客戶即可

**優點：**
- 免費
- 設定簡單
- 3 分鐘就能完成

**缺點：**
- 免費版網址會變動
- 每次重啟需要新網址

### 選項 2：部署到雲端服務

**Heroku（推薦）**
- 免費方案可用
- 會給固定網址
- 設定稍微複雜

**Render**
- 免費方案
- 自動部署
- 會給固定網址

**Railway**
- 免費額度
- 部署簡單
- 支援自動部署

### 選項 3：自己的伺服器
- 需要固定 IP
- 需要網域名稱
- 需要 SSL 憑證

---

## 📞 聯絡方式

如果客戶在使用管理後台時遇到問題，可以：

1. 查看此文件
2. 檢查瀏覽器控制台錯誤訊息
3. 聯繫系統管理員

---

## 🎯 快速啟動步驟

1. 開啟命令提示字元（CMD）
2. 進入專案資料夾:
   ```bash
   cd C:\Users\ASUS\Desktop\work\cyndisystem
   ```
3. 啟動伺服器:
   ```bash
   npm start
   ```
4. 等待看到「服務器已啟動在 port 3000」
5. 開啟瀏覽器，前往: `http://localhost:3000/admin`

---

✅ **管理後台已經可以使用了！**
